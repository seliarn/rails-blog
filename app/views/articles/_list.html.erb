<% articles.each_with_index do |article, i|
  article_url = !article.url.empty? ? post_path(slug: article.url) : article_path(article)
%>

  <% unless i.odd? %>
    <div class="row">
  <% end %>
  <div class="col-6">
    <div class="card flex-md-row mb-4 box-shadow h-md-250" style="height: 280px">
      <div class="card-body d-flex flex-column align-items-start">
        <span><%= article.categories.map { |category| category.title }.join(', ') %></span>
        <h3 class="mb-0">
          <a class="text-dark" href="<%= article_url %>">
            <%= article.title.truncate(40) %>
          </a>
        </h3>
        <div class="mb-1 text-muted fst-italic"><%= article.publish_date %></div>
        <p class="card-text mb-auto"><%= raw(article.short_body) %></p>

        <a href="<%= article_url %>">
          Continue reading
        </a>
      </div>
      <% if article.preview_picture %>
        <div>
          <img class="card-img-right flex-auto d-none d-md-block"
               alt="<%= article.title %>" style="width: 200px; height: 200px"
               src="<%= '/storage/' + article.preview_picture %>" data-holder-rendered="true">
        </div>
      <% end %>
    </div>
  </div>
  <% if i.odd? %>
    </div><!-- row -->
  <% end %>
<% end %>